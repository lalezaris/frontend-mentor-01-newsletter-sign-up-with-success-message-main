<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="assets/styles.css" />

    <title>
      Frontend Mentor | Newsletter sign-up form with success message
    </title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  </head>

  <body>
    <!-- Sign-up form start -->
    <nav class="back">
      <a href="https://samlalezari.com">SamLalezari.com</a>
      <a
        href="https://github.com/lalezaris/frontend-mentor-01-newsletter-sign-up-with-success-message-main"
        >GitHub Repository</a
      >
    </nav>
    <main>
      <div class="card" id="signupForm" data-visible="true">
        <div class="card-content">
          <h1>Stay updated!</h1>

          <p>Join 60,000+ product managers receiving monthly updates on:</p>

          <ul>
            <li>Product discovery and building what matters</li>
            <li>Measuring to ensure updates are a success</li>
            <li>And much more!</li>
          </ul>

          <form name="newsletter" novalidate onsubmit="handleSubmit()">
            <label for="email" id="emailLabel">Email address</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="email@company.com"
            />

            <button type="submit">Subscribe to monthly newsletter</button>
          </form>
        </div>
        <div class="card-image">
          <img
            class="desktop-img"
            src="assets/images/illustration-sign-up-desktop.svg"
            aria-hidden="true"
          />
          <img
            class="mobile-img"
            src="assets/images/illustration-sign-up-mobile.svg"
            aria-hidden="true"
          />
        </div>
      </div>

      <!-- Sign-up form end -->

      <!-- Success message start -->

      <div class="card success" id="successForm" data-visible="false">
        <img
          class="success-img"
          src="assets/images/icon-success.svg"
          aria-hidden="true"
        />
        <h1>Thanks for subscribing!</h1>

        <p>
          A confirmation email has been sent to
          <span id="email-span"></span>. Please open it and click the button
          inside to confirm your subscription.
        </p>

        <button type="button" onclick="handleDismiss()">Dismiss message</button>
      </div>
    </main>

    <!-- Success message end -->

    <footer class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
        >Frontend Mentor</a
      >. Coded by <a href="https://samlalezari.com">Sam Lalezari</a>.
    </footer>
  </body>

  <script>
    const emailInput = document.querySelector("#email");
    const emailLabel = document.querySelector("#emailLabel");
    emailInput.addEventListener("change", () => {
      if (emailInput.validity.valid) {
        emailInput.dataset.valid = true;
        emailLabel.dataset.valid = true;
      }
    });

    function handleSubmit() {
      event.preventDefault();
      if (emailInput.validity.valid && email.value) {
        document.querySelector("#email-span").textContent = email.value;
        emailInput.value = "";
        document.querySelector("#signupForm").dataset.visible = false;
        document.querySelector("#successForm").dataset.visible = true;
      } else {
        console.log("valid is false");
        emailInput.dataset.valid = false;
        emailLabel.dataset.valid = false;
      }
    }

    function handleDismiss() {
      event.preventDefault();
      document.querySelector("#signupForm").dataset.visible = true;
      document.querySelector("#successForm").dataset.visible = false;
    }
  </script>
</html>
